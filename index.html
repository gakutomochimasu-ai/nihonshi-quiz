<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>æ—¥æœ¬å²ã‚¯ã‚¤ã‚ºâ˜†ãƒãƒƒãƒ—ç‰ˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        "Helvetica Neue", "Yu Gothic", "Meiryo", sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
      background: radial-gradient(circle at top left, #fff3e0, #e1f5fe 40%, #f3e5f5);
    }

    .app-wrapper {
      width: 100%;
      max-width: 760px;
    }

    .card {
      background: #ffffffee;
      backdrop-filter: blur(10px);
      border-radius: 22px;
      padding: 22px 24px 20px;
      box-shadow: 0 16px 35px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.9);
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 14px;
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-icon {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 30%, #ffeb3b, #f06292);
      color: #fff;
      font-size: 1.4rem;
      box-shadow: 0 6px 14px rgba(240, 98, 146, 0.4);
    }

    .title-main {
      font-size: 1.3rem;
      font-weight: 800;
      letter-spacing: 0.04em;
      color: #5c6bc0;
    }

    .title-sub {
      font-size: 0.8rem;
      color: #999;
    }

    .pill {
      padding: 5px 11px;
      border-radius: 999px;
      font-size: 0.75rem;
      background: #e8f5e9;
      color: #2e7d32;
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .pill span {
      font-size: 1rem;
    }

    .progress-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      font-size: 0.85rem;
      color: #777;
    }

    .progress-bar-track {
      width: 100%;
      height: 8px;
      background: #f1f1f1;
      border-radius: 999px;
      overflow: hidden;
      margin-bottom: 16px;
    }

    .progress-bar-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ff6f91, #ffca28);
      transition: width 0.35s ease;
    }

    .question-number {
      font-size: 0.9rem;
      font-weight: 700;
      color: #ff7043;
      margin-bottom: 4px;
    }

    .question-text {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 14px;
      line-height: 1.6;
      color: #333;
    }

    .choices {
      display: grid;
      gap: 10px;
      margin-bottom: 10px;
    }

    .choice-btn {
      width: 100%;
      text-align: left;
      border-radius: 14px;
      border: 1px solid #e0e0e0;
      padding: 11px 12px;
      background: #ffffff;
      font-size: 0.96rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: transform 0.08s ease, box-shadow 0.08s ease,
        background 0.15s ease, border-color 0.15s ease;
    }

    .choice-btn:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 5px 12px rgba(0, 0, 0, 0.06);
      border-color: #ffccbc;
      background: #fff8e1;
    }

    .choice-label {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 24px;
      height: 24px;
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 700;
      background: #e3f2fd;
      color: #1976d2;
      flex-shrink: 0;
    }

    .choice-text {
      flex: 1;
      word-break: keep-all;
    }

    .choice-btn.correct {
      border-color: #66bb6a;
      background: #e8f5e9;
    }

    .choice-btn.wrong {
      border-color: #ef5350;
      background: #ffebee;
    }

    .choice-btn:disabled {
      cursor: default;
      box-shadow: none;
      transform: none;
    }

    .explanation-box {
      border-radius: 14px;
      padding: 10px 12px;
      margin-top: 4px;
      margin-bottom: 12px;
      font-size: 0.9rem;
      line-height: 1.5;
      display: none;
    }

    .explanation-box.correct {
      background: #e8f5e9;
      border: 1px solid #a5d6a7;
      color: #2e7d32;
    }

    .explanation-box.wrong {
      background: #ffebee;
      border: 1px solid #ef9a9a;
      color: #c62828;
    }

    .explanation-title {
      font-weight: 700;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .reaction-text {
      font-size: 0.9rem;
      color: #555;
      margin-top: 2px;
    }

    .footer-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-top: 6px;
    }

    .score-text {
      font-size: 0.9rem;
      color: #555;
    }

    .btn {
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 0.9rem;
      font-weight: 700;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(90deg, #ff6f91, #ffca28);
      color: #fff;
      box-shadow: 0 5px 12px rgba(255, 111, 145, 0.35);
    }

    .btn-primary:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }

    .btn-outline {
      background: #ffffff;
      color: #5c6bc0;
      border: 1px solid #c5cae9;
    }

    /* ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ & çµæœç”»é¢ */
    .screen {
      display: none;
    }

    .screen.active {
      display: block;
    }

    .start-title {
      font-size: 1.4rem;
      font-weight: 800;
      margin-bottom: 8px;
      color: #5c6bc0;
    }

    .start-text {
      font-size: 0.95rem;
      color: #666;
      margin-bottom: 14px;
      line-height: 1.6;
    }

    .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
      font-size: 0.8rem;
    }

    .tag-chip {
      padding: 4px 9px;
      border-radius: 999px;
      background: #f3e5f5;
      color: #7b1fa2;
      font-weight: 600;
    }

    .start-options {
      margin-top: 8px;
      margin-bottom: 10px;
      display: grid;
      gap: 8px;
      font-size: 0.9rem;
      color: #555;
    }

    .start-options label {
      font-weight: 600;
      margin-right: 6px;
    }

    .start-select {
      margin-top: 4px;
      width: 100%;
      max-width: 260px;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid #d1c4e9;
      font-size: 0.9rem;
      background: #faf5ff;
    }

    .result-title {
      font-size: 1.3rem;
      font-weight: 800;
      margin-bottom: 6px;
      color: #5c6bc0;
    }

    .result-score {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 4px;
      color: #ff7043;
    }

    .result-comment {
      font-size: 0.95rem;
      color: #444;
      margin-bottom: 12px;
      line-height: 1.6;
    }

    @media (max-width: 480px) {
      .card {
        padding: 18px 16px 16px;
      }
      .app-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .title-main {
        font-size: 1.15rem;
      }
    }
  </style>
</head>
<body>
  <div class="app-wrapper">
    <div class="card">

      <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
      <div id="startScreen" class="screen active">
        <div class="app-header">
          <div class="logo-area">
            <div class="logo-icon">ğŸ“š</div>
            <div>
              <div class="title-main">æ—¥æœ¬å²ã‚¯ã‚¤ã‚ºâ˜†ãƒãƒƒãƒ—</div>
              <div class="title-sub">é«˜æ ¡ç”Ÿå‘ã‘ãƒ»åŸºç¤ã€œå…±é€šãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«</div>
            </div>
          </div>
          <div class="pill">
            <span>âœ¨</span> å˜å…ƒï¼†ãƒ¬ãƒ™ãƒ«ã‚’é¸ã¹ã¾ã™
          </div>
        </div>

        <div style="margin-top: 8px;">
          <div class="start-title">ã•ãã€æ—¥æœ¬å²ã§éŠã¼ã†ï¼</div>
          <p class="start-text">
            ç¸„æ–‡æ™‚ä»£ã‹ã‚‰æˆ¦å¾Œã¾ã§ã€<br>
            æ—¥æœ¬å²ã®åŸºç¤ã€œå…±é€šãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ãŒãƒãƒƒãƒ—ãªã‚¯ã‚¤ã‚ºã«ãªã‚Šã¾ã—ãŸã€‚<br>
            1å•ã”ã¨ã«
            <strong>ã€Œæ­£è§£ï¼ä¸æ­£è§£ã€ï¼‹ã¦ã„ã­ã„ãªè§£èª¬</strong>
            ãŒå‡ºã‚‹ã®ã§ã€éŠã³ãªãŒã‚‰å¾©ç¿’ã§ãã¾ã™ã€‚
          </p>

          <div class="tag-list">
            <span class="tag-chip">#ç¸„æ–‡ã€œç¾ä»£</span>
            <span class="tag-chip">#å…±é€šãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«å¯¾å¿œ</span>
            <span class="tag-chip">#è§£èª¬ã¤ã</span>
            <span class="tag-chip">#ã‚¹ãƒãƒ›å¯¾å¿œ</span>
          </div>

          <div class="start-options">
            <div>
              <label for="difficultySelect">é›£æ˜“åº¦ï¼š</label><br />
              <select id="difficultySelect" class="start-select">
                <option value="all">ãŠã™ã™ã‚ï¼ˆå…¨éƒ¨ã¾ãœã‚‹ï¼‰</option>
                <option value="basic">åŸºç¤ã€œæ¨™æº–ã ã‘</option>
                <option value="advanced">å…±é€šãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ã ã‘</option>
              </select>
            </div>
            <div>
              <label for="periodSelect">å˜å…ƒï¼š</label><br />
              <select id="periodSelect" class="start-select">
                <option value="all">å…¨ç¯„å›²ï¼ˆå¤ä»£ã€œç¾ä»£ï¼‰</option>
                <option value="å¤ä»£">å¤ä»£ï¼ˆç¸„æ–‡ã€œå¹³å®‰ï¼‰</option>
                <option value="ä¸­ä¸–">ä¸­ä¸–ï¼ˆéŒå€‰ã€œå®¤ç”ºï¼‰</option>
                <option value="è¿‘ä¸–">è¿‘ä¸–ï¼ˆå®‰åœŸæ¡ƒå±±ã€œæ±Ÿæˆ¸ï¼‰</option>
                <option value="è¿‘ä»£">è¿‘ä»£ï¼ˆæ˜æ²»ã€œæ˜­å’Œå‰åŠï¼‰</option>
                <option value="ç¾ä»£">ç¾ä»£ï¼ˆæˆ¦å¾Œã€œï¼‰</option>
              </select>
            </div>
          </div>

          <button id="startBtn" class="btn btn-primary" style="margin-top: 4px;">
            â–¶ ã“ã®æ¡ä»¶ã§ã‚¯ã‚¤ã‚ºã‚’ã¯ã˜ã‚ã‚‹
          </button>
        </div>
      </div>

      <!-- ã‚¯ã‚¤ã‚ºç”»é¢ -->
      <div id="quizScreen" class="screen">
        <div class="app-header">
          <div class="logo-area">
            <div class="logo-icon">ğŸ¯</div>
            <div>
              <div class="title-main">æ—¥æœ¬å²ã‚¯ã‚¤ã‚º</div>
              <div class="title-sub" id="quizSubTitle">1å•ãšã¤ã˜ã£ãã‚Šï¼†æ¥½ã—ã</div>
            </div>
          </div>
          <div class="pill">
            <span>ğŸ®</span> ãƒ—ãƒ¬ã‚¤ä¸­
          </div>
        </div>

        <div class="progress-row">
          <div id="progressText"></div>
          <div id="scoreMiniText"></div>
        </div>

        <div class="progress-bar-track">
          <div class="progress-bar-fill" id="progressBar"></div>
        </div>

        <div class="question-number" id="questionNumber"></div>
        <div class="question-text" id="questionText"></div>
        <div class="choices" id="choicesContainer"></div>

        <div id="explanationBox" class="explanation-box">
          <div class="explanation-title" id="explanationTitle"></div>
          <div id="explanationText"></div>
          <div class="reaction-text" id="reactionText"></div>
        </div>

        <div class="footer-row">
          <div class="score-text" id="scoreText"></div>
          <div style="display:flex; gap:6px;">
            <button class="btn btn-outline" id="backToStartBtn">ã‚„ã‚ã‚‹</button>
            <button class="btn btn-primary" id="nextBtn" disabled>æ¬¡ã®å•é¡Œ â–¶</button>
          </div>
        </div>
      </div>

      <!-- çµæœç”»é¢ -->
      <div id="resultScreen" class="screen">
        <div class="app-header">
          <div class="logo-area">
            <div class="logo-icon">ğŸ‰</div>
            <div>
              <div class="title-main">çµæœç™ºè¡¨ï¼</div>
              <div class="title-sub">ãŠã¤ã‹ã‚Œã•ã¾ã§ã—ãŸ</div>
            </div>
          </div>
          <div class="pill">
            <span>ğŸ“</span> ãµã‚Šã‹ãˆã‚Šã‚¿ã‚¤ãƒ 
          </div>
        </div>

        <div style="margin-top: 10px;">
          <div class="result-title" id="resultTitleText"></div>
          <div class="result-score" id="resultScoreText"></div>
          <div class="result-comment" id="resultCommentText"></div>

          <button class="btn btn-primary" id="restartBtn" style="margin-right:6px;">
            ğŸ” åŒã˜æ¡ä»¶ã§ã‚‚ã†ä¸€åº¦
          </button>
          <button class="btn btn-outline" id="resultBackToStartBtn">
            ğŸ  æ¡ä»¶ã‚’å¤‰ãˆã¦ã‚„ã‚Šç›´ã™
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ----------------------------------------
    // æ—¥æœ¬å²ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ï¼ˆè§£èª¬ãƒ»å˜å…ƒãƒ»ãƒ¬ãƒ™ãƒ«ã¤ãï¼‰
    // period: å¤ä»£ / ä¸­ä¸– / è¿‘ä¸– / è¿‘ä»£ / ç¾ä»£
    // level:  basicï¼ˆåŸºç¤ã€œæ¨™æº–ï¼‰ / advancedï¼ˆå…±é€šãƒ†ã‚¹ãƒˆï¼‰
    // ----------------------------------------
    const quizData = [
      // ====== åŸºç¤ã€œæ¨™æº–ãƒ¬ãƒ™ãƒ« ======
      {
        question: "ç¸„æ–‡æ™‚ä»£ã®äººã€…ã®ä»£è¡¨çš„ãªä½å±…ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["ç«ªç©´ä½å±…", "é«˜åºŠå€‰åº«", "æ›¸é™¢é€ ", "å¯æ®¿é€ "],
        answer: 0,
        explanation:
          "ç¸„æ–‡æ™‚ä»£ã®äººã€…ã¯ã€åœ°é¢ã‚’æ˜ã‚Šä¸‹ã’ã¦æŸ±ã‚’ç«‹ã¦ã€å±‹æ ¹ã‚’ã‹ã‘ãŸã€Œç«ªç©´ä½å±…ã€ã«ä½ã‚“ã§ã„ã¾ã—ãŸã€‚",
        period: "å¤ä»£",
        level: "basic"
      },
      {
        question: "å¤§åŒ–ã®æ”¹æ–°ã§ä¸­å¿ƒã¨ãªã£ãŸäººç‰©ã¯ã ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["è–å¾³å¤ªå­", "è—¤åŸéŒè¶³", "æºé ¼æœ", "ç¹”ç”°ä¿¡é•·"],
        answer: 1,
        explanation:
          "ä¸­å¤§å…„çš‡å­ã¨ã¨ã‚‚ã«è˜‡æˆ‘æ°ã‚’å€’ã—ã€æ”¿æ²»æ”¹é©ã‚’é€²ã‚ãŸã®ãŒè—¤åŸéŒè¶³ã§ã™ã€‚",
        period: "å¤ä»£",
        level: "basic"
      },
      {
        question: "å¹³å®‰äº¬ãŒé€ å–¶ã•ã‚ŒãŸã®ã¯ç¾åœ¨ã®ã©ã“ã®éƒ½å¸‚ã§ã™ã‹ï¼Ÿ",
        choices: ["æ±äº¬", "å¥ˆè‰¯", "äº¬éƒ½", "å¤§é˜ª"],
        answer: 2,
        explanation:
          "å¹³å®‰äº¬ã¯ç¾åœ¨ã®äº¬éƒ½å¸‚ã‚’ä¸­å¿ƒã¨ã™ã‚‹åœ°åŸŸã«é€ å–¶ã•ã‚Œã¾ã—ãŸï¼ˆ794å¹´ãƒ»æ¡“æ­¦å¤©çš‡ï¼‰ã€‚",
        period: "å¤ä»£",
        level: "basic"
      },
      {
        question: "æºé ¼æœãŒé–‹ã„ãŸå¹•åºœã®æ‰€åœ¨åœ°ã¯ã©ã“ã§ã™ã‹ï¼Ÿ",
        choices: ["å¤§é˜ª", "éŒå€‰", "æ±Ÿæˆ¸", "äº¬éƒ½"],
        answer: 1,
        explanation:
          "1192å¹´ã«å¾å¤·å¤§å°†è»ã¨ãªã£ãŸæºé ¼æœã¯ã€éŒå€‰ã«å¹•åºœã‚’é–‹ãã¾ã—ãŸã€‚",
        period: "ä¸­ä¸–",
        level: "basic"
      },
      {
        question: "åˆ€ç‹©ã‚„æ¤œåœ°ã‚’è¡Œã„ã€å…¨å›½çµ±ä¸€ã‚’é€²ã‚ãŸæˆ¦å›½å¤§åã¯ã ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["è±Šè‡£ç§€å‰", "ç¹”ç”°ä¿¡é•·", "å¾³å·å®¶åº·", "ä¸Šæ‰è¬™ä¿¡"],
        answer: 0,
        explanation:
          "å¤ªé–¤æ¤œåœ°ã‚„åˆ€ç‹©ä»¤ãªã©ã§è¾²æ°‘æ”¯é…ã‚’å¼·åŒ–ã—ã€å…¨å›½çµ±ä¸€ã‚’å®Œæˆã•ã›ãŸã®ã¯è±Šè‡£ç§€å‰ã§ã™ã€‚",
        period: "è¿‘ä¸–",
        level: "basic"
      },
      {
        question: "æ±Ÿæˆ¸å¹•åºœãŒå‚å‹¤äº¤ä»£ã‚’åˆ¶åº¦åŒ–ã—ãŸå°†è»ã¯ã ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["å¾³å·å®¶åº·", "å¾³å·å®¶å…‰", "å¾³å·ç¶±å‰", "å¾³å·å‰å®—"],
        answer: 1,
        explanation:
          "3ä»£å°†è»ãƒ»å¾³å·å®¶å…‰ã®ã¨ãã«å‚å‹¤äº¤ä»£ãŒåˆ¶åº¦ã¨ã—ã¦æ•´ãˆã‚‰ã‚Œã¾ã—ãŸã€‚",
        period: "è¿‘ä¸–",
        level: "basic"
      },
      {
        question: "ã€Œé–å›½ã€ã«ã‚ˆã£ã¦æ±Ÿæˆ¸æ™‚ä»£ã®æ—¥æœ¬ã¨äº¤æ˜“ã—ã¦ã„ãŸãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ã®å›½ã¯ã©ã“ã§ã™ã‹ï¼Ÿ",
        choices: ["ãƒ•ãƒ©ãƒ³ã‚¹", "ã‚¤ã‚®ãƒªã‚¹", "ã‚ªãƒ©ãƒ³ãƒ€", "ã‚¹ãƒšã‚¤ãƒ³"],
        answer: 2,
        explanation:
          "é•·å´ã®å‡ºå³¶ã‚’é€šã˜ã¦ã€æ—¥æœ¬ã¨è²¿æ˜“ã—ã¦ã„ãŸãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ã®å›½ã¯ã‚ªãƒ©ãƒ³ãƒ€ã§ã—ãŸã€‚",
        period: "è¿‘ä¸–",
        level: "basic"
      },
      {
        question: "ã€Œå°Šç‹æ”˜å¤·ã€ã‚’å”±ãˆã€ã®ã¡ã«å€’å¹•ã®ä¸­å¿ƒã¨ãªã£ãŸè—©ã®ã²ã¨ã¤ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["ä½è³€è—©", "ä¼šæ´¥è—©", "è–©æ‘©è—©ãƒ»é•·å·è—©", "æ´¥è—©"],
        answer: 2,
        explanation:
          "è–©æ‘©è—©ãƒ»é•·å·è—©ã¯å°Šç‹æ”˜å¤·é‹å‹•ã®ä¸­å¿ƒã¨ãªã‚Šã€ã®ã¡ã«å€’å¹•ã®ä¸»åŠ›ã¨ãªã‚Šã¾ã—ãŸã€‚",
        period: "è¿‘ä»£",
        level: "basic"
      },
      {
        question: "æ˜æ²»æ”¿åºœãŒå‡ºã—ãŸã€Œå»ƒè—©ç½®çœŒã€ã¯ã€ä¸»ã«ä½•ã‚’ç›®çš„ã¨ã—ãŸæ”¿ç­–ã§ã™ã‹ï¼Ÿ",
        choices: [
          "èº«åˆ†åˆ¶åº¦ã®å»ƒæ­¢",
          "è—©ã‚’ãªãã—ã¦ä¸­å¤®é›†æ¨©å›½å®¶ã‚’ã¤ãã‚‹ã“ã¨",
          "æ¤œåœ°ã«ã‚ˆã‚‹ç¨åç¢ºä¿",
          "è»éšŠã®è¿‘ä»£åŒ–"
        ],
        answer: 1,
        explanation:
          "å»ƒè—©ç½®çœŒã¯ã€è—©ã‚’å»ƒæ­¢ã—ã¦çœŒã‚’ç½®ãã€ä¸­å¤®æ”¿åºœã«ã‚ˆã‚‹å…¨å›½çµ±ä¸€çš„ãªæ”¯é…ã‚’ç›®æŒ‡ã—ãŸæ”¹é©ã§ã™ã€‚",
        period: "è¿‘ä»£",
        level: "basic"
      },
      {
        question: "æ˜æ²»æ™‚ä»£ã«å…¬å¸ƒã•ã‚ŒãŸã€æ—¥æœ¬æœ€åˆã®è¿‘ä»£çš„ãªæ†²æ³•ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["æ—¥æœ¬å›½æ†²æ³•", "äº”ç®‡æ¡ã®å¾¡èª“æ–‡", "å¤§æ—¥æœ¬å¸å›½æ†²æ³•", "æ²»å®‰ç¶­æŒæ³•"],
        answer: 2,
        explanation:
          "1889å¹´ã«å…¬å¸ƒã•ã‚ŒãŸã®ãŒå¤§æ—¥æœ¬å¸å›½æ†²æ³•ã§ã€ç«‹æ†²å›ä¸»åˆ¶ã®ã‚‚ã¨ã§è­°ä¼šæ”¿æ²»ãŒå§‹ã¾ã‚Šã¾ã—ãŸã€‚",
        period: "è¿‘ä»£",
        level: "basic"
      },
      {
        question: "ç¬¬ä¸€æ¬¡ä¸–ç•Œå¤§æˆ¦å¾Œã€æ—¥æœ¬ãŒå›½éš›é€£ç›Ÿã‹ã‚‰å§”ä»»çµ±æ²»ã‚’å—ã‘ãŸã®ã¯ã©ã“ã§ã™ã‹ï¼Ÿ",
        choices: ["å°æ¹¾", "æœé®®", "å—æ´‹è«¸å³¶", "æº€å·"],
        answer: 2,
        explanation:
          "æ—¥æœ¬ã¯ãƒ‰ã‚¤ãƒ„é ˜ã ã£ãŸå—æ´‹è«¸å³¶ã®å§”ä»»çµ±æ²»æ¨©ã‚’å›½éš›é€£ç›Ÿã‹ã‚‰ä¸ãˆã‚‰ã‚Œã¾ã—ãŸã€‚",
        period: "è¿‘ä»£",
        level: "basic"
      },
      {
        question: "æˆ¦å¾Œã€æ—¥æœ¬ãŒåˆ¶å®šã—ãŸç¾åœ¨ã®æ†²æ³•ã¯ã„ã¤æ–½è¡Œã•ã‚Œã¾ã—ãŸã‹ï¼Ÿ",
        choices: ["1945å¹´", "1946å¹´", "1947å¹´", "1950å¹´"],
        answer: 2,
        explanation:
          "æ—¥æœ¬å›½æ†²æ³•ã¯1947å¹´5æœˆ3æ—¥ã«æ–½è¡Œã•ã‚Œã¾ã—ãŸï¼ˆå…¬å¸ƒã¯1946å¹´11æœˆ3æ—¥ï¼‰ã€‚",
        period: "ç¾ä»£",
        level: "basic"
      },
      {
        question: "é«˜åº¦çµŒæ¸ˆæˆé•·æœŸã«å¤§ããç™ºå±•ã—ãŸã®ã¯ã€ä¸»ã«ã©ã®ã‚ˆã†ãªç”£æ¥­ã§ã™ã‹ï¼Ÿ",
        choices: [
          "è¾²æ¥­ä¸­å¿ƒã®ç¬¬ä¸€æ¬¡ç”£æ¥­",
          "é‡åŒ–å­¦å·¥æ¥­ã‚’ä¸­å¿ƒã¨ã™ã‚‹ç¬¬äºŒæ¬¡ç”£æ¥­",
          "ã‚µãƒ¼ãƒ“ã‚¹æ¥­ä¸­å¿ƒã®ç¬¬ä¸‰æ¬¡ç”£æ¥­",
          "æ—æ¥­ãƒ»æ°´ç”£æ¥­"
        ],
        answer: 1,
        explanation:
          "é‰„é‹¼ãƒ»é€ èˆ¹ãƒ»è‡ªå‹•è»Šãƒ»çŸ³æ²¹åŒ–å­¦ãªã©ã®é‡åŒ–å­¦å·¥æ¥­ã‚’ä¸­å¿ƒã«ã€æ—¥æœ¬çµŒæ¸ˆã¯æ€¥æˆé•·ã—ã¾ã—ãŸã€‚",
        period: "ç¾ä»£",
        level: "basic"
      },
      {
        question: "1970å¹´ã«å¤§é˜ªã§é–‹ã‹ã‚ŒãŸã€æ—¥æœ¬åˆã®å›½éš›åšè¦§ä¼šã¯ä½•ã¨å‘¼ã°ã‚Œã¾ã™ã‹ï¼Ÿ",
        choices: ["æ„›çŸ¥ä¸‡åš", "å¤§é˜ªä¸‡åšï¼ˆæ—¥æœ¬ä¸‡å›½åšè¦§ä¼šï¼‰", "æ±äº¬ä¸‡åš", "ç¥æˆ¸ä¸‡åš"],
        answer: 1,
        explanation:
          "1970å¹´ã«å¤§é˜ªã§é–‹å‚¬ã•ã‚ŒãŸæ—¥æœ¬åˆã®æœ¬æ ¼çš„ãªä¸‡åšã¯ã€Œæ—¥æœ¬ä¸‡å›½åšè¦§ä¼šï¼ˆå¤§é˜ªä¸‡åšï¼‰ã€ã§ã™ã€‚",
        period: "ç¾ä»£",
        level: "basic"
      },
      {
        question: "å¹³å’Œä¸»ç¾©ã‚’ç¤ºã™ã€æ—¥æœ¬å›½æ†²æ³•ç¬¬9æ¡ã«é–¢ä¿‚ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["æˆ¦äº‰ã®æ”¾æ£„", "è±¡å¾´å¤©çš‡åˆ¶", "åŸºæœ¬çš„äººæ¨©ã®å°Šé‡", "åœ°æ–¹è‡ªæ²»"],
        answer: 0,
        explanation:
          "æ—¥æœ¬å›½æ†²æ³•ç¬¬9æ¡ã§ã¯ã€æˆ¦äº‰ã¨æˆ¦åŠ›ã®ä¿æŒã‚’æ”¾æ£„ã™ã‚‹ã€Œå¹³å’Œä¸»ç¾©ã€ãŒã†ãŸã‚ã‚Œã¦ã„ã¾ã™ã€‚",
        period: "ç¾ä»£",
        level: "basic"
      },

      // ====== å…±é€šãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ï¼ˆã‚„ã‚„é›£ï¼‰ ======
      {
        question: "701å¹´ã«åˆ¶å®šã•ã‚ŒãŸå¤§å®å¾‹ä»¤ã®ç›®çš„ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: [
          "å°†è»ã«ã‚ˆã‚‹æ­¦å®¶æ”¿æ¨©ã®ç¢ºç«‹",
          "å¤©çš‡ã‚’ä¸­å¿ƒã¨ã—ãŸå¾‹ä»¤å›½å®¶ä½“åˆ¶ã®æ•´å‚™",
          "æ­¦å£«ã«ã‚ˆã‚‹åœ°æ–¹æ”¯é…ã®å®¹èª",
          "æ¬§ç±³åˆ—å¼·ã¨ã®ä¸å¹³ç­‰æ¡ç´„æ”¹æ­£"
        ],
        answer: 1,
        explanation:
          "å¤§å®å¾‹ä»¤ã¯ã€å¤©çš‡ã‚’é ‚ç‚¹ã¨ã™ã‚‹ä¸­å¤®é›†æ¨©çš„ãªå¾‹ä»¤å›½å®¶ä½“åˆ¶ã‚’æ•´ãˆã‚‹ãŸã‚ã«åˆ¶å®šã•ã‚Œã¾ã—ãŸã€‚",
        period: "å¤ä»£",
        level: "advanced"
      },
      {
        question: "è—¤åŸé“é•·ãƒ»é ¼é€šã®æ™‚ä»£ã«æœ€ã‚‚æ „ãˆãŸæ–‡åŒ–ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["é£›é³¥æ–‡åŒ–", "å¤©å¹³æ–‡åŒ–", "å›½é¢¨æ–‡åŒ–", "éŒå€‰æ–‡åŒ–"],
        answer: 2,
        explanation:
          "è—¤åŸé“é•·ãƒ»é ¼é€šã®å…¨ç››æœŸã«ã¯ã€ã‹ãªæ–‡å­—ã‚„ç‰©èªæ–‡å­¦ãŒç™ºé”ã—ãŸã€Œå›½é¢¨æ–‡åŒ–ã€ãŒæ „ãˆã¾ã—ãŸã€‚",
        period: "å¤ä»£",
        level: "advanced"
      },
      {
        question: "æ‰¿ä¹…ã®ä¹±ã§æ•—ã‚Œã€éš å²ã«æµã•ã‚ŒãŸä¸Šçš‡ã¯ã ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["å¾Œç™½æ²³ä¸Šçš‡", "å¾Œé³¥ç¾½ä¸Šçš‡", "å¾Œé†é†å¤©çš‡", "ç™½æ²³ä¸Šçš‡"],
        answer: 1,
        explanation:
          "æœå»·æ¨©åŠ›ã®å›å¾©ã‚’ã‚ã–ã—ã¦æŒ™å…µã—ãŸå¾Œé³¥ç¾½ä¸Šçš‡ã¯ã€æ‰¿ä¹…ã®ä¹±ã«æ•—ã‚Œã€éš å²ã«æµã•ã‚Œã¾ã—ãŸã€‚",
        period: "ä¸­ä¸–",
        level: "advanced"
      },
      {
        question: "å…ƒå¯‡ã®å¾Œã€å¾¡å®¶äººã®å›°çª®ã‚’æ•‘ã†ãŸã‚ã«å‡ºã•ã‚ŒãŸæ”¿ç­–ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: [
          "ç”Ÿé¡æ†ã¿ã®ä»¤",
          "å¾³æ”¿ä»¤",
          "å»ƒè—©ç½®çœŒ",
          "å…¬åœ°å…¬æ°‘åˆ¶"
        ],
        answer: 1,
        explanation:
          "å…ƒå¯‡å¾Œã®å¾¡å®¶äººã®ç”Ÿæ´»è‹¦ã‚’æ•‘æ¸ˆã™ã‚‹ãŸã‚ã€å¹•åºœã¯å€Ÿé‡‘ã®å¸³æ¶ˆã—ãªã©ã‚’è¡Œã†ã€Œå¾³æ”¿ä»¤ã€ã‚’ã—ã°ã—ã°å‡ºã—ã¾ã—ãŸã€‚",
        period: "ä¸­ä¸–",
        level: "advanced"
      },
      {
        question: "å…ƒç¦„æ–‡åŒ–ã®ä»£è¡¨çš„ãªä¿³äººã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["æ¾å°¾èŠ­è•‰", "ä¸è¬è•ªæ‘", "å°æ—ä¸€èŒ¶", "äº•åŸè¥¿é¶´"],
        answer: 0,
        explanation:
          "æ¾å°¾èŠ­è•‰ã¯ã€æ±Ÿæˆ¸å‰æœŸã®å…ƒç¦„æ–‡åŒ–ã‚’ä»£è¡¨ã™ã‚‹ä¿³äººã§ã™ã€‚",
        period: "è¿‘ä¸–",
        level: "advanced"
      },
      {
        question: "äº«ä¿ã®æ”¹é©ã‚’ä¸»å°ã—ãŸäººç‰©ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["å¾³å·å®¶å…‰", "å¾³å·å®¶ç¶±", "å¾³å·ç¶±å‰", "å¾³å·å‰å®—"],
        answer: 3,
        explanation:
          "äº«ä¿ã®æ”¹é©ã¯8ä»£å°†è»ãƒ»å¾³å·å‰å®—ãŒè¡Œã£ãŸå¹•æ”¿æ”¹é©ã§ã€ä¸Šã’ç±³ã®åˆ¶ã‚„ç›®å®‰ç®±ã®è¨­ç½®ãªã©ãŒæœ‰åã§ã™ã€‚",
        period: "è¿‘ä¸–",
        level: "advanced"
      },
      {
        question: "æ˜æ²»ç¶­æ–°ç›´å¾Œã«å‡ºã•ã‚ŒãŸã€Œäº”ç®‡æ¡ã®å¾¡èª“æ–‡ã€ã®å†…å®¹ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: [
          "å››æ°‘å¹³ç­‰ã‚„è¯æ—ãƒ»å£«æ—ãƒ»å¹³æ°‘ã®èº«åˆ†åˆ¶åº¦ã‚’å®šã‚ãŸ",
          "è­°è«–ã‚’é‡ã‚“ã˜ã¦åºƒãæ„è¦‹ã‚’å–ã‚Šå…¥ã‚Œã€å›½ã‚’é–‹ã„ã¦åˆ—å¼·ã«è¿½ã„ã¤ãå§¿å‹¢ã‚’ç¤ºã—ãŸ",
          "å¤©çš‡ä¸»æ¨©ã«åŸºã¥ãçµ±å¸¥æ¨©ã®ç‹¬ç«‹ã‚’å®šã‚ãŸ",
          "è¾²æ°‘ä¸€æ†ã®ç¦æ­¢ã¨å¹´è²¢å¢—å¾´ã‚’å®šã‚ãŸ"
        ],
        answer: 1,
        explanation:
          "äº”ç®‡æ¡ã®å¾¡èª“æ–‡ã¯ã€åºƒãä¼šè­°ã‚’èˆˆã—ã¦ä¸–è«–ã‚’å°Šé‡ã—ã€çŸ¥è­˜ã‚’ä¸–ç•Œã«æ±‚ã‚ã‚‹ãªã©é–‹æ˜çš„ãªæ–¹é‡ã‚’ç¤ºã—ã¾ã—ãŸã€‚",
        period: "è¿‘ä»£",
        level: "advanced"
      },
      {
        question: "æ—¥æ¸…æˆ¦äº‰ã®è¬›å’Œæ¡ç´„ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: [
          "ãƒãƒ¼ãƒ„ãƒã‚¹æ¡ç´„",
          "ã‚µãƒ³ãƒ•ãƒ©ãƒ³ã‚·ã‚¹ã‚³å¹³å’Œæ¡ç´„",
          "ä¸‹é–¢æ¡ç´„",
          "æ—¥ç±³å’Œè¦ªæ¡ç´„"
        ],
        answer: 2,
        explanation:
          "1895å¹´ã€æ—¥æ¸…æˆ¦äº‰ã®è¬›å’Œæ¡ç´„ã¨ã—ã¦çµã°ã‚ŒãŸã®ãŒä¸‹é–¢æ¡ç´„ã§ã€é¼æ±åŠå³¶ãƒ»å°æ¹¾ãƒ»æ¾æ¹–è«¸å³¶ã®å‰²è­²ãªã©ãŒç››ã‚Šè¾¼ã¾ã‚Œã¾ã—ãŸã€‚",
        period: "è¿‘ä»£",
        level: "advanced"
      },
      {
        question: "æ—¥éœ²æˆ¦äº‰å¾Œã€æ—¥æœ¬ãŒãƒ­ã‚·ã‚¢ã¨ã®é–“ã§çµã‚“ã è¬›å’Œæ¡ç´„ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: [
          "ãƒãƒ¼ãƒ„ãƒã‚¹æ¡ç´„",
          "ãƒ¯ã‚·ãƒ³ãƒˆãƒ³æ¡ç´„",
          "ãƒ­ãƒ³ãƒ‰ãƒ³æµ·è»è»ç¸®æ¡ç´„",
          "ã‚µãƒ³ãƒ•ãƒ©ãƒ³ã‚·ã‚¹ã‚³å¹³å’Œæ¡ç´„"
        ],
        answer: 0,
        explanation:
          "1905å¹´ã€æ—¥éœ²æˆ¦äº‰ã®è¬›å’Œæ¡ç´„ã¨ã—ã¦ã‚¢ãƒ¡ãƒªã‚«ã®ãƒãƒ¼ãƒ„ãƒã‚¹ã§çµã°ã‚ŒãŸã®ãŒãƒãƒ¼ãƒ„ãƒã‚¹æ¡ç´„ã§ã™ã€‚",
        period: "è¿‘ä»£",
        level: "advanced"
      },
      {
        question: "1960å¹´ã«æ”¹å®šã•ã‚Œã€å¤§ããªåå¯¾é‹å‹•ã‚‚èµ·ããŸæ¡ç´„ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: [
          "æ—¥ã‚½å…±åŒå®£è¨€",
          "æ—¥ä¸­å¹³å’Œå‹å¥½æ¡ç´„",
          "æ—¥éŸ“åŸºæœ¬æ¡ç´„",
          "æ—¥ç±³å®‰å…¨ä¿éšœæ¡ç´„"
        ],
        answer: 3,
        explanation:
          "1960å¹´ã«æ”¹å®šã•ã‚ŒãŸæ—¥ç±³å®‰å…¨ä¿éšœæ¡ç´„ï¼ˆæ–°å®‰ä¿æ¡ç´„ï¼‰ã‚’ã‚ãã£ã¦ã€å¤§è¦æ¨¡ãªå®‰ä¿é—˜äº‰ãŒèµ·ãã¾ã—ãŸã€‚",
        period: "ç¾ä»£",
        level: "advanced"
      },
      {
        question: "é«˜åº¦çµŒæ¸ˆæˆé•·æœŸã®åˆæœŸã«ã€Œæ‰€å¾—å€å¢—è¨ˆç”»ã€ã‚’æ‰“ã¡å‡ºã—ãŸé¦–ç›¸ã¯ã ã‚Œã§ã™ã‹ï¼Ÿ",
        choices: ["å‰ç”°èŒ‚", "æ± ç”°å‹‡äºº", "ä½è—¤æ „ä½œ", "ç”°ä¸­è§’æ „"],
        answer: 1,
        explanation:
          "æ± ç”°å‹‡äººå†…é–£ã¯1960å¹´ã«ã€Œæ‰€å¾—å€å¢—è¨ˆç”»ã€ã‚’æ‰“ã¡å‡ºã—ã€è¼¸å‡ºæ‹¡å¤§ãªã©ã‚’é€šã˜ã¦é«˜åº¦çµŒæ¸ˆæˆé•·ã‚’æ¨é€²ã—ã¾ã—ãŸã€‚",
        period: "ç¾ä»£",
        level: "advanced"
      }
    ];

    // ----------------------------------------
    // è¦ç´ å–å¾—
    // ----------------------------------------
    const startScreen = document.getElementById("startScreen");
    const quizScreen = document.getElementById("quizScreen");
    const resultScreen = document.getElementById("resultScreen");

    const startBtn = document.getElementById("startBtn");
    const backToStartBtn = document.getElementById("backToStartBtn");
    const resultBackToStartBtn = document.getElementById("resultBackToStartBtn");
    const restartBtn = document.getElementById("restartBtn");

    const difficultySelect = document.getElementById("difficultySelect");
    const periodSelect = document.getElementById("periodSelect");
    const quizSubTitleEl = document.getElementById("quizSubTitle");

    const progressTextEl = document.getElementById("progressText");
    const scoreMiniTextEl = document.getElementById("scoreMiniText");
    const progressBarEl = document.getElementById("progressBar");
    const questionNumberEl = document.getElementById("questionNumber");
    const questionTextEl = document.getElementById("questionText");
    const choicesContainerEl = document.getElementById("choicesContainer");
    const explanationBoxEl = document.getElementById("explanationBox");
    const explanationTitleEl = document.getElementById("explanationTitle");
    const explanationTextEl = document.getElementById("explanationText");
    const reactionTextEl = document.getElementById("reactionText");
    const scoreTextEl = document.getElementById("scoreText");
    const nextBtn = document.getElementById("nextBtn");

    const resultTitleTextEl = document.getElementById("resultTitleText");
    const resultScoreTextEl = document.getElementById("resultScoreText");
    const resultCommentTextEl = document.getElementById("resultCommentText");

    // ----------------------------------------
    // çŠ¶æ…‹ç®¡ç†
    // ----------------------------------------
    let currentIndex = 0;
    let score = 0;
    let answered = false;
    let currentQuestions = []; // ãƒ•ã‚£ãƒ«ã‚¿å¾Œã®å•é¡Œã‚»ãƒƒãƒˆ

    const choiceLabels = ["A", "B", "C", "D"];

    // ----------------------------------------
    // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼šé…åˆ—ã‚·ãƒ£ãƒƒãƒ•ãƒ«
    // ----------------------------------------
    function shuffle(array) {
      const a = array.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    // ----------------------------------------
    // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
    // ----------------------------------------
    function showScreen(screenName) {
      startScreen.classList.remove("active");
      quizScreen.classList.remove("active");
      resultScreen.classList.remove("active");

      if (screenName === "start") {
        startScreen.classList.add("active");
      } else if (screenName === "quiz") {
        quizScreen.classList.add("active");
      } else if (screenName === "result") {
        resultScreen.classList.add("active");
      }
    }

    // ----------------------------------------
    // å•é¡Œã‚»ãƒƒãƒˆã‚’æ¡ä»¶ã§çµã‚Šè¾¼ã¿
    // ----------------------------------------
    function buildQuestionSet() {
      const level = difficultySelect.value; // all / basic / advanced
      const period = periodSelect.value;    // all / å¤ä»£ / ä¸­ä¸– / ...

      let list = quizData.filter((q) => {
        const levelOk = level === "all" || q.level === level;
        const periodOk = period === "all" || q.period === period;
        return levelOk && periodOk;
      });

      // ã‚‚ã—æ¡ä»¶ãŒå³ã—ã™ãã¦ã‚¼ãƒ­ä»¶ãªã‚‰ã€å…¨ä½“ã‹ã‚‰å‡ºã™
      if (list.length === 0) {
        list = quizData.slice();
      }

      // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦è¿”ã™
      return shuffle(list);
    }

    // ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ¡ä»¶ã«åˆã‚ã›ã¦è¡¨ç¤º
    function updateQuizSubTitle() {
      const level = difficultySelect.value;
      const period = periodSelect.value;

      let levelText = "";
      if (level === "basic") levelText = "åŸºç¤ã€œæ¨™æº–";
      else if (level === "advanced") levelText = "å…±é€šãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«";
      else levelText = "åŸºç¤ã€œå…±é€šãƒ†ã‚¹ãƒˆMIX";

      let periodText = "";
      if (period === "all") periodText = "ï¼ˆå¤ä»£ã€œç¾ä»£ï¼‰";
      else periodText = `ï¼ˆ${period}ï¼‰`;

      quizSubTitleEl.textContent = `${levelText}${periodText}ãƒ¢ãƒ¼ãƒ‰`;
    }

    // ----------------------------------------
    // ã‚¯ã‚¤ã‚ºåˆæœŸåŒ–
    // ----------------------------------------
    function initQuiz() {
      currentQuestions = buildQuestionSet();
      currentIndex = 0;
      score = 0;
      answered = false;
      updateQuizSubTitle();
      renderQuestion();
    }

    // ----------------------------------------
    // å•é¡Œè¡¨ç¤º
    // ----------------------------------------
    function renderQuestion() {
      const total = currentQuestions.length;
      const q = currentQuestions[currentIndex];

      questionNumberEl.textContent = `ç¬¬ ${currentIndex + 1} å• / å…¨ ${total} å•`;
      questionTextEl.textContent = q.question;

      progressTextEl.textContent = `é€²è¡Œåº¦ï¼š${currentIndex + 1} / ${total}`;
      scoreMiniTextEl.textContent = `ä»Šã®æ­£è§£æ•°ï¼š${score} å•`;

      const progressPercent = (currentIndex / total) * 100;
      progressBarEl.style.width = `${progressPercent}%`;

      choicesContainerEl.innerHTML = "";
      explanationBoxEl.style.display = "none";
      explanationTitleEl.textContent = "";
      explanationTextEl.textContent = "";
      reactionTextEl.textContent = "";
      nextBtn.disabled = true;
      answered = false;

      q.choices.forEach((choice, index) => {
        const btn = document.createElement("button");
        btn.className = "choice-btn";
        btn.dataset.index = index;
        btn.innerHTML = `
          <span class="choice-label">${choiceLabels[index] || ""}</span>
          <span class="choice-text">${choice}</span>
        `;
        btn.addEventListener("click", () => handleAnswer(index));
        choicesContainerEl.appendChild(btn);
      });

      scoreTextEl.textContent = `æ­£è§£æ•°ï¼š${score} / ${total}`;
    }

    // ----------------------------------------
    // è§£ç­”å‡¦ç†
    // ----------------------------------------
    function handleAnswer(selectedIndex) {
      if (answered) return;
      answered = true;

      const q = currentQuestions[currentIndex];
      const buttons = Array.from(
        document.querySelectorAll(".choice-btn")
      );

      buttons.forEach((btn) => {
        btn.disabled = true;
        const idx = Number(btn.dataset.index);
        if (idx === q.answer) {
          btn.classList.add("correct");
        }
      });

      const selectedBtn = buttons.find(
        (btn) => Number(btn.dataset.index) === selectedIndex
      );

      if (selectedIndex === q.answer) {
        score++;
        explanationBoxEl.classList.remove("wrong");
        explanationBoxEl.classList.add("correct");
        explanationTitleEl.innerHTML = "âœ… æ­£è§£ï¼";
        reactionTextEl.textContent = getPositiveReaction();
      } else {
        if (selectedBtn) {
          selectedBtn.classList.add("wrong");
        }
        explanationBoxEl.classList.remove("correct");
        explanationBoxEl.classList.add("wrong");
        explanationTitleEl.innerHTML = `âŒ æ®‹å¿µï¼ æ­£è§£ã¯ã€Œ${q.choices[q.answer]}ã€`;
        reactionTextEl.textContent = getEncouragingReaction();
      }

      explanationTextEl.textContent = q.explanation;
      explanationBoxEl.style.display = "block";

      nextBtn.disabled = false;

      const total = currentQuestions.length;
      scoreTextEl.textContent = `æ­£è§£æ•°ï¼š${score} / ${total}`;
      scoreMiniTextEl.textContent = `ä»Šã®æ­£è§£æ•°ï¼š${score} å•`;

      const progressPercent = ((currentIndex + 1) / total) * 100;
      progressBarEl.style.width = `${progressPercent}%`;
    }

    // ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæ­£è§£æ™‚ï¼‰
    function getPositiveReaction() {
      const patterns = [
        "ã„ã„èª¿å­ï¼ã“ã®ã¾ã¾ã„ã“ã† âœ¨",
        "ãŠè¦‹äº‹ï¼æ—¥æœ¬å²ãƒã‚¹ã‚¿ãƒ¼ã®æ°—é…â€¦ï¼",
        "å®Œç’§ï¼æ•™ç§‘æ›¸ãƒ¬ãƒ™ãƒ«ã¯ãƒãƒƒãƒãƒªã ã­ ğŸ‘",
        "ãƒŠã‚¤ã‚¹ï¼æ¬¡ã®å•é¡Œã‚‚ã„ã£ã¦ã¿ã‚ˆã†ï¼",
        "ç´ æ™´ã‚‰ã—ã„ï¼é›†ä¸­ã§ãã¦ã‚‹ã­ ğŸ‘"
      ];
      return patterns[Math.floor(Math.random() * patterns.length)];
    }

    // åŠ±ã¾ã—ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆä¸æ­£è§£æ™‚ï¼‰
    function getEncouragingReaction() {
      const patterns = [
        "å¤§ä¸ˆå¤«ï¼è§£èª¬ã‚’èª­ã‚ã°æ¬¡ã¯è§£ã‘ã‚‹ã¯ãš ğŸ”",
        "ãŠã—ã„ï¼ã“ã“ã¯ã‚ˆãå‡ºã‚‹ãƒã‚¤ãƒ³ãƒˆã ã‹ã‚‰è¦šãˆã‚ˆã† ğŸ‘€",
        "æ°—ã«ã—ãªã„ï¼é–“é•ãˆãŸã¨ã“ã‚ãŒä¼¸ã³ã—ã‚ âœ¨",
        "ãµã‚€ãµã‚€ã€ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è¦šãˆã‚‰ã‚Œã¦ãƒ©ãƒƒã‚­ãƒ¼ã‹ã‚‚ï¼",
        "æ¬¡ã§å–ã‚Šè¿”ãã†ï¼ãƒ•ã‚¡ã‚¤ãƒˆ ğŸ’ª"
      ];
      return patterns[Math.floor(Math.random() * patterns.length)];
    }

    // ----------------------------------------
    // çµæœè¡¨ç¤º
    // ----------------------------------------
    function showResult() {
      const total = currentQuestions.length;
      const percentage = Math.round((score / total) * 100);

      let title = "";
      let comment = "";

      if (percentage >= 90) {
        title = "ç¥ãƒ¬ãƒ™ãƒ«æ—¥æœ¬å²ãƒã‚¹ã‚¿ãƒ¼ï¼ğŸ‘‘";
        comment =
          "æ­£ç­”ç‡90ï¼…ä»¥ä¸Šï¼é«˜æ ¡æ—¥æœ¬å²ã®åŸºç¤ã¯ã»ã¼å®Œç’§ã€‚å…±é€šãƒ†ã‚¹ãƒˆã‚‚è¦–é‡ã«å…¥ã£ã¦ãã¾ã™ã€‚";
      } else if (percentage >= 70) {
        title = "ã‹ãªã‚Šã„ã„æ„Ÿã˜ã§ã™ï¼âœ¨";
        comment =
          "æ­£ç­”ç‡70ï¼…ä»¥ä¸Šã€‚åŸºæœ¬ã¯ã—ã£ã‹ã‚Šèº«ã«ã¤ã„ã¦ã„ã¾ã™ã€‚ã‚ã¨å°‘ã—å¾©ç¿’ã™ã‚Œã°ãƒ†ã‚¹ãƒˆã‚‚å®‰å¿ƒã€‚";
      } else if (percentage >= 50) {
        title = "ã¾ãšã¾ãšã®ã‚¹ã‚¿ãƒ¼ãƒˆï¼ğŸ‘";
        comment =
          "æ­£ç­”ç‡50ï¼…å°ã€‚è§£èª¬ã‚’èª­ã¿ãªãŒã‚‰ã€é–“é•ãˆãŸã¨ã“ã‚ã‚’å¾©ç¿’ã™ã‚‹ã¨ä¸€æ°—ã«ä¼¸ã³ãã†ã§ã™ã€‚";
      } else {
        title = "ã“ã“ã‹ã‚‰ä¸€ç·’ã«ä¼¸ã°ãã†ï¼ğŸ“–";
        comment =
          "ã¾ã ã“ã‚Œã‹ã‚‰ä¼¸ã³ã—ã‚ã ã‚‰ã‘ã€‚ä½•åº¦ã‹ã‚„ã‚Šç›´ã™ã¨ç”¨èªã‚„æµã‚ŒãŒã—ã£ã‹ã‚Šé ­ã«å…¥ã£ã¦ãã¾ã™ã€‚";
      }

      resultTitleTextEl.textContent = title;
      resultScoreTextEl.textContent = `ã‚¹ã‚³ã‚¢ï¼š${score} / ${total} å•ï¼ˆæ­£ç­”ç‡ï¼š${percentage}%ï¼‰`;
      resultCommentTextEl.textContent = comment;

      showScreen("result");
    }

    // ----------------------------------------
    // ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
    // ----------------------------------------
    startBtn.addEventListener("click", () => {
      showScreen("quiz");
      initQuiz();
    });

    backToStartBtn.addEventListener("click", () => {
      showScreen("start");
    });

    resultBackToStartBtn.addEventListener("click", () => {
      showScreen("start");
    });

    restartBtn.addEventListener("click", () => {
      showScreen("quiz");
      initQuiz();
    });

    nextBtn.addEventListener("click", () => {
      if (currentIndex < currentQuestions.length - 1) {
        currentIndex++;
        renderQuestion();
      } else {
        showResult();
      }
    });
  </script>
</body>
</html>
